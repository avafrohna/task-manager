{"ast":null,"code":"import{Link}from'react-router-dom';import React,{useState}from\"react\";import{useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(null);const[loading,setLoading]=useState(false);const navigate=useNavigate();const handleLogin=async e=>{e.preventDefault();setLoading(true);setError(null);console.log('Logging in with email:',email);try{const response=await axios.post(`${process.env.REACT_APP_API_URL}/api/login`,{email,password});console.log('Login successful, response data:',response.data);const token=response.data.token;localStorage.setItem('token',token);navigate('/list-tasks');}catch(err){console.error('Login failed:',err);setError(err.response?err.response.data.error:'Error logging in');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary create-account-button\",children:\"Create an Account\"})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mt-3\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"login-form mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",value:email,onChange:e=>setEmail(e.target.value),required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",value:password,onChange:e=>setPassword(e.target.value),required:true,disabled:loading})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary mt-3\",disabled:loading,children:loading?'Logging in...':'Login'})]})]})});};export default Login;","map":{"version":3,"names":["Link","React","useState","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Login","email","setEmail","password","setPassword","error","setError","loading","setLoading","navigate","handleLogin","e","preventDefault","console","log","response","post","process","env","REACT_APP_API_URL","data","token","localStorage","setItem","err","className","children","to","onSubmit","type","value","onChange","target","required","disabled"],"sources":["/Users/avafrohna/Code/cloudcomputing/task-manager/src/components/login-page.jsx"],"sourcesContent":["import { Link } from 'react-router-dom';\nimport React, { useState } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nconst Login = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null); \n    console.log('Logging in with email:', email);\n\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/login`, { email, password });\n      console.log('Login successful, response data:', response.data);\n      const token = response.data.token;\n      localStorage.setItem('token', token);\n\n      navigate('/list-tasks');\n    } \n    catch (err) {\n      console.error('Login failed:', err);\n      setError(err.response ? err.response.data.error : 'Error logging in');\n    } \n    finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"login-wrapper\">\n      <div className=\"login-container\">\n        <div className=\"login-header\">\n          <h2>Login</h2>\n          <Link to=\"/register\">\n            <button className=\"btn btn-secondary create-account-button\">Create an Account</button>\n          </Link>\n        </div>\n\n        {error && <div className=\"alert alert-danger mt-3\">{error}</div>}\n\n        <form onSubmit={handleLogin} className=\"login-form mt-4\">\n          <div className=\"form-group\">\n            <label>Email</label>\n            <input\n              type=\"email\"\n              className=\"form-control\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n              disabled={loading}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>Password</label>\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n              disabled={loading}\n            />\n          </div>\n\n          <button type=\"submit\" className=\"btn btn-primary mt-3\" disabled={loading}>\n            {loading ? 'Logging in...' : 'Login'}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}