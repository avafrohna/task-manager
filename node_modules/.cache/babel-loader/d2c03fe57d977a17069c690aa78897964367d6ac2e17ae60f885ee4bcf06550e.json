{"ast":null,"code":"import{Link}from'react-router-dom';import{useEffect,useState}from'react';import axios from'axios';import Header from'./header';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProfilePage(){const[user,setUser]=useState({});const[error,setError]=useState(null);useEffect(()=>{const fetchUser=async()=>{try{const token=localStorage.getItem('token');console.log('Fetched token:',token);if(!token){throw new Error('No token found, please login again.');}const response=await axios.get(`${process.env.REACT_APP_API_URL}/api/user`,{headers:{Authorization:`Bearer ${token}`}});console.log('User data fetched:',response.data);setUser(response.data);}catch(err){var _err$response,_err$response$data;console.error('Error fetching user data:',err);setError(`Error fetching user: ${((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message}`);}};fetchUser();},[]);return/*#__PURE__*/_jsxs(\"div\",{id:\"tasks\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-custom mt-3\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User Profile\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"First Name:\"}),\" \",user.firstname]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last Name:\"}),\" \",user.lastname]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",user.email]}),/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger fs-5\",children:\"Logout\"})})]})]});}export default ProfilePage;","map":{"version":3,"names":["Link","useEffect","useState","axios","Header","jsx","_jsx","jsxs","_jsxs","ProfilePage","user","setUser","error","setError","fetchUser","token","localStorage","getItem","console","log","Error","response","get","process","env","REACT_APP_API_URL","headers","Authorization","data","err","_err$response","_err$response$data","message","id","children","className","firstname","lastname","email","to"],"sources":["/Users/avafrohna/Code/cloudcomputing/task-manager/src/components/profile.jsx"],"sourcesContent":["import { Link } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Header from './header';\n\nfunction ProfilePage() {\n  const [user, setUser] = useState({});\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        console.log('Fetched token:', token);\n        if (!token) {\n          throw new Error('No token found, please login again.');\n        }\n\n        const response = await axios.get(`${process.env.REACT_APP_API_URL}/api/user`, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        console.log('User data fetched:', response.data);\n        setUser(response.data);\n      } \n      catch (err) {\n        console.error('Error fetching user data:', err);\n        setError(`Error fetching user: ${err.response?.data?.error || err.message}`);\n      }\n    };\n\n    fetchUser();\n  }, []);\n\n  return (\n    <div id=\"tasks\">\n      <Header />\n      \n      <div className=\"container-custom mt-3\">\n        <h1>User Profile</h1>\n\n        {error && <p className=\"text-danger\">{error}</p>}\n      \n        <p><strong>First Name:</strong> {user.firstname}</p>\n        <p><strong>Last Name:</strong> {user.lastname}</p>\n        <p><strong>Email:</strong> {user.email}</p>\n        <Link to=\"/login\">\n          <button className=\"btn btn-danger fs-5\">Logout</button>\n        </Link>\n      </div>\n    </div>\n  );  \n}\n\nexport default ProfilePage;\n"],"mappings":"AAAA,OAASA,IAAI,KAAQ,kBAAkB,CACvC,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9B,QAAS,CAAAC,WAAWA,CAAA,CAAG,CACrB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,CAAC,CAAC,CAAC,CACpC,KAAM,CAACU,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAExCD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3CC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEJ,KAAK,CAAC,CACpC,GAAI,CAACA,KAAK,CAAE,CACV,KAAM,IAAI,CAAAK,KAAK,CAAC,qCAAqC,CAAC,CACxD,CAEA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAlB,KAAK,CAACmB,GAAG,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,WAAW,CAAE,CAC5EC,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUZ,KAAK,EAAG,CAC9C,CAAC,CAAC,CACFG,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEE,QAAQ,CAACO,IAAI,CAAC,CAChDjB,OAAO,CAACU,QAAQ,CAACO,IAAI,CAAC,CACxB,CACA,MAAOC,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACVb,OAAO,CAACN,KAAK,CAAC,2BAA2B,CAAEiB,GAAG,CAAC,CAC/ChB,QAAQ,CAAC,wBAAwB,EAAAiB,aAAA,CAAAD,GAAG,CAACR,QAAQ,UAAAS,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcF,IAAI,UAAAG,kBAAA,iBAAlBA,kBAAA,CAAoBnB,KAAK,GAAIiB,GAAG,CAACG,OAAO,EAAE,CAAC,CAC9E,CACF,CAAC,CAEDlB,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEN,KAAA,QAAKyB,EAAE,CAAC,OAAO,CAAAC,QAAA,eACb5B,IAAA,CAACF,MAAM,GAAE,CAAC,cAEVI,KAAA,QAAK2B,SAAS,CAAC,uBAAuB,CAAAD,QAAA,eACpC5B,IAAA,OAAA4B,QAAA,CAAI,cAAY,CAAI,CAAC,CAEpBtB,KAAK,eAAIN,IAAA,MAAG6B,SAAS,CAAC,aAAa,CAAAD,QAAA,CAAEtB,KAAK,CAAI,CAAC,cAEhDJ,KAAA,MAAA0B,QAAA,eAAG5B,IAAA,WAAA4B,QAAA,CAAQ,aAAW,CAAQ,CAAC,IAAC,CAACxB,IAAI,CAAC0B,SAAS,EAAI,CAAC,cACpD5B,KAAA,MAAA0B,QAAA,eAAG5B,IAAA,WAAA4B,QAAA,CAAQ,YAAU,CAAQ,CAAC,IAAC,CAACxB,IAAI,CAAC2B,QAAQ,EAAI,CAAC,cAClD7B,KAAA,MAAA0B,QAAA,eAAG5B,IAAA,WAAA4B,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACxB,IAAI,CAAC4B,KAAK,EAAI,CAAC,cAC3ChC,IAAA,CAACN,IAAI,EAACuC,EAAE,CAAC,QAAQ,CAAAL,QAAA,cACf5B,IAAA,WAAQ6B,SAAS,CAAC,qBAAqB,CAAAD,QAAA,CAAC,QAAM,CAAQ,CAAC,CACnD,CAAC,EACJ,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAzB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}