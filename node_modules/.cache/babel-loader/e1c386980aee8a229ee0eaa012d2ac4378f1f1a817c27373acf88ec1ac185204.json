{"ast":null,"code":"import{useNavigate,useParams}from'react-router-dom';import{useState,useEffect}from'react';import axios from'axios';import Header from'./header';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TaskFormPage(){const{taskID}=useParams();const editMode=Boolean(taskID);const[error,setError]=useState(null);const navigate=useNavigate();console.log('Edit mode:',editMode);console.log('Task ID:',taskID);const[formData,setFormData]=useState({title:'',description:'',status:'Not started'});useEffect(()=>{if(editMode){const fetchTaskData=async()=>{try{const token=localStorage.getItem('token');if(!token){throw new Error('No token found, please login again.');}console.log('Fetching data for task ID:',taskID);const response=await axios.get(`${process.env.REACT_APP_API_URL}/api/tasks/${taskID}`,{headers:{Authorization:`Bearer ${token}`}});const task=response.data;console.log('Fetched task data:',task);setFormData({title:task.title,description:task.description||'',status:task.status});}catch(err){var _err$response,_err$response$data;console.error('Error fetching task:',err);setError(`Error fetching task: ${((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message}`);}};fetchTaskData();}},[editMode,taskID]);const editForm=e=>{const{name,value,type,checked}=e.target;setFormData({...formData,[name]:type==='checkbox'?checked:value});console.log('Form data updated:',formData);};const submit=async e=>{e.preventDefault();setError(null);try{const token=localStorage.getItem('token');if(!token){throw new Error('No token found, please login again.');}if(editMode){console.log('Updating task:',formData);await axios.put(`${process.env.REACT_APP_API_URL}/api/tasks/${taskID}`,formData,{headers:{Authorization:`Bearer ${token}`}});console.log('Task updated successfully');}else{console.log('Creating new task:',formData);await axios.post(`${process.env.REACT_APP_API_URL}/api/tasks`,formData,{headers:{Authorization:`Bearer ${token}`}});console.log('New task created successfully');}navigate('/list-tasks');}catch(err){var _err$response2,_err$response2$data;console.error('Error saving task:',err);setError(`Error saving tasks: ${((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||err.message}`);}};return/*#__PURE__*/_jsxs(\"div\",{id:\"root\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-custom mt-3\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\" \",editMode?'Edit Task':'Add Task',\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" Fill in the form below to \",editMode?'edit this':'create a new',\" task. \"]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:formData.title,onChange:editForm,className:\"form-control\",required:true}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted small\",children:\"The name of your task.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:editForm,className:\"form-control\",rows:\"2\",required:true}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted small\",children:\"Provide a brief description of your task.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:formData.status,onChange:editForm,className:\"form-select\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Not started\",children:\"Not started\"}),/*#__PURE__*/_jsx(\"option\",{value:\"In progress\",children:\"In progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Finished\",children:\"Finished\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted small\",children:\"Select status of task.\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success mb-4\",children:\"Save Task\"})]})]})]});}export default TaskFormPage;","map":{"version":3,"names":["useNavigate","useParams","useState","useEffect","axios","Header","jsx","_jsx","jsxs","_jsxs","TaskFormPage","taskID","editMode","Boolean","error","setError","navigate","console","log","formData","setFormData","title","description","status","fetchTaskData","token","localStorage","getItem","Error","response","get","process","env","REACT_APP_API_URL","headers","Authorization","task","data","err","_err$response","_err$response$data","message","editForm","e","name","value","type","checked","target","submit","preventDefault","put","post","_err$response2","_err$response2$data","id","children","className","onSubmit","onChange","required","rows"],"sources":["/Users/avafrohna/Code/cloudcomputing/task-manager/src/components/task-form.jsx"],"sourcesContent":["import { useNavigate, useParams } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Header from './header';\n\nfunction TaskFormPage() {\n  const { taskID } = useParams();\n  const editMode = Boolean(taskID); \n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n\n  console.log('Edit mode:', editMode);\n  console.log('Task ID:', taskID);\n\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    status: 'Not started',\n  });\n\n  useEffect(() => {\n    if (editMode) {\n      const fetchTaskData = async () => {\n        try {\n          const token = localStorage.getItem('token');\n          if (!token) {\n            throw new Error('No token found, please login again.');\n          }\n\n          console.log('Fetching data for task ID:', taskID);\n          const response = await axios.get(\n            `${process.env.REACT_APP_API_URL}/api/tasks/${taskID}`,\n            {\n              headers: { Authorization: `Bearer ${token}` }\n            }\n          );\n          \n          const task = response.data;\n          console.log('Fetched task data:', task);\n          setFormData({\n            title: task.title,\n            description: task.description || '',\n            status: task.status,\n          });\n        }\n        catch (err) {\n          console.error('Error fetching task:', err);\n          setError(`Error fetching task: ${err.response?.data?.error || err.message}`);\n        }\n      };\n      fetchTaskData();\n    }\n  }, [editMode, taskID]);\n\n  const editForm = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData({\n      ...formData,\n      [name]: type === 'checkbox' ? checked : value,\n    });\n    console.log('Form data updated:', formData);\n  };\n\n  const submit = async (e) => {\n    e.preventDefault(); \n    setError(null);\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('No token found, please login again.');\n      }\n\n      if (editMode) {\n        console.log('Updating task:', formData);\n        await axios.put(\n          `${process.env.REACT_APP_API_URL}/api/tasks/${taskID}`, \n          formData, \n          {\n            headers: { Authorization: `Bearer ${token}` }\n          }\n        );\n        console.log('Task updated successfully');\n      } \n      else {\n        console.log('Creating new task:', formData);\n        await axios.post(\n          `${process.env.REACT_APP_API_URL}/api/tasks`, \n          formData, \n          {\n            headers: { Authorization: `Bearer ${token}` }\n          }\n        );\n        console.log('New task created successfully');\n      }\n      navigate('/list-tasks');\n    } \n    catch (err) {\n      console.error('Error saving task:', err);\n      setError(`Error saving tasks: ${err.response?.data?.error || err.message}`);\n    }\n  };\n\n  return (\n    <div id=\"root\">\n      <Header />\n\n      <div className=\"container-custom mt-3\">\n        <h1> {editMode ? 'Edit Task' : 'Add Task'} </h1>\n        <p> Fill in the form below to {editMode ? 'edit this' : 'create a new'} task. </p>\n\n        {error && <p className=\"text-danger\">{error}</p>}\n        \n        <form onSubmit={submit}>\n          <div className=\"mb-3\">\n            <label className=\"form-label\">Title</label>\n            <input\n              type=\"text\"\n              name=\"title\"\n              value={formData.title}\n              onChange={editForm}\n              className=\"form-control\"\n              required\n            />\n            <p className=\"text-muted small\">The name of your task.</p>\n          </div>\n\n          <div className=\"mb-3\">\n            <label className=\"form-label\">Description</label>\n            <textarea\n              name=\"description\"\n              value={formData.description}\n              onChange={editForm}\n              className=\"form-control\"\n              rows=\"2\"\n              required\n            />\n            <p className=\"text-muted small\">Provide a brief description of your task.</p>\n          </div>\n\n          <div className=\"mb-3\">\n            <label className=\"form-label\">Status</label>\n            <select\n              name=\"status\"\n              value={formData.status}\n              onChange={editForm}\n              className=\"form-select\"\n              required\n            >\n              <option value=\"Not started\">Not started</option>\n              <option value=\"In progress\">In progress</option>\n              <option value=\"Finished\">Finished</option>\n            </select>\n            <p className=\"text-muted small\">Select status of task.</p>\n          </div>\n\n          <button type=\"submit\" className=\"btn btn-success mb-4\">Save Task</button>\n        </form>\n      </div>\n\n    </div>\n  );\n}\n\nexport default TaskFormPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}